<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      lang="en" data-namespace-typo3-fluid="true">
<head>
    <meta charset="utf-8">
    <title>Template: Card</title>
    <--
        "NoWrapper" layout must always be used when:
        * using the container extension and the “Card Grid” container, the div container with the class `.col` must follow “row row-cols-1 …”
        * the content element is used in “Insert record” (todo)

        Without this special treatment, the card elements would not be displayed in multiple columns or would not be flush
    -->
</head>
<body>

<f:layout name="{f:if(condition: '{isInCardsContainer} == \'true\'', then: 'NoWrapper', else: 'Default')}"/>

<f:section name="Header"/>

<f:section name="Main">
    <f:if condition="{directParent.CType} == 'ot-sitekit-base-container-grid-cards'">
        <f:variable name="isInCardsContainer" value="true" />
    </f:if>

    <div class="card{f:if(condition: '{isInCardsContainer} == \'true\'', then: ' h-100')} ce-{data.uid}">
        <f:if condition="{isInCardsContainer} == 'true'">
            <span id="c{data.uid}" class="anchor"></span>
        </f:if>
        <f:if condition="{data.subheader}">
            <div class="card-header">
                {data.subheader}
            </div>
        </f:if>
        <f:comment> <!-- <![CDATA[
            At a resolution of 575 pixels, the image size is largest at 551 pixels due to the 3 card grid columns.
        ]]>	--> </f:comment>
        <f:if condition="{files}">
            <f:variable name="cssClasses">img-fluid{f:if(condition: '{data.subheader} == \'\'', then: ' card-img-top')}</f:variable>
            <f:render partial="Media/Media" arguments="{
                files: files,
                data: data,
                cropVariants: cropVariants,
                directParent: directParent,
                parentElements: parentElements,
                mode: 'firstImage',
                class: '{cssClasses}',
                maxImageWidth: 551
            }"/>
        </f:if>
        <div class="card-body">
            <f:if condition="{data.header_layout} != 100">
                <f:if condition="{data.header_layout} == 0">
                    <f:then>
                        <f:variable name="headerLayout" value="h{settings.defaultHeaderType}"/>
                    </f:then>
                    <f:else>
                        <f:variable name="headerLayout" value="h{settings.defaultHeaderType}"/>
                    </f:else>
                </f:if>
                <f:if condition="{directParent.header_layout} > 0">
                    <f:variable name="headerLayout" value="h{directParent.header_layout}"/>
                </f:if>
                <{headerLayout} class="h5 card-title ot-cecard-title icon-responsive">
                    <f:if condition="{data.icon_identifier}">
                        <f:then>
                            <f:render section="WithIcon" arguments="{data: data}"/>
                        </f:then>
                        <f:else>
                            <f:render section="WithoutIcon" arguments="{data: data}"/>
                        </f:else>
                    </f:if>
                </{headerLayout}>
            </f:if>

            <div class="card-text">
                {data.bodytext -> f:format.html()}
                <f:if condition="{irreButtons}">
                    <f:render partial="IrreButtons" section="Main" arguments="{data : data, irreButtons : irreButtons}"/>
                </f:if>
            </div>
        </div>
    </div>
</f:section>

<f:section name="WithIcon">
    <span class="ot-cecard-icon">
          <f:render partial="Icon" section="Main" arguments="{iconIdentifier: data.icon_identifier}" />
    </span>
    <span class="ot-cecard-title-text">
        <f:link.typolink parameter="{data.header_link}">{data.header}</f:link.typolink>
    <span>
</f:section>

<f:section name="WithoutIcon">
    <f:link.typolink parameter="{data.header_link}">{data.header}</f:link.typolink>
</f:section>

</body>
</html>
